(this.webpackJsonpphonebookfrontend=this.webpackJsonpphonebookfrontend||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n(16),r=n.n(a),o=n(1),s=n(4),u=n(0),i=function(e){var t=e.value,n=e.handleFiltered;return Object(u.jsxs)("div",{className:"search-container",children:["search contact: ",Object(u.jsx)("input",{value:t,onChange:n})]})},j=function(e){return Object(u.jsx)("form",{className:"contactform-container",onSubmit:e.addPerson,children:Object(u.jsxs)("fieldset",{children:[Object(u.jsx)("legend",{children:"Add contact"}),Object(u.jsxs)("div",{children:["Name:",Object(u.jsx)("input",{value:e.valuename,onChange:e.handleNameChange})]}),Object(u.jsxs)("div",{children:["Number:",Object(u.jsx)("input",{type:"number",value:e.valuenumber,onChange:e.handleNumberChange})]}),Object(u.jsx)("button",{type:"submit",children:"add"})]})})},l=function(e){var t=e.person,n=e.handleRemove;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t.name}),Object(u.jsx)("td",{children:t.number}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:n,children:"delete"})})]})},b=function(e){var t=e.filteredContact,n=e.handleRemove;return Object(u.jsxs)("table",{children:[Object(u.jsx)("caption",{children:"Contact list"}),Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:" Name"}),Object(u.jsx)("th",{children:"Phone no"}),Object(u.jsx)("th",{children:"Action"})]}),t.map((function(e){return Object(u.jsx)(l,{person:e,handleRemove:function(){return n(e.id,e.name)}},e.id)}))]})]})},d=n(5),m=n.n(d),O="/api/persons",h={getAll:function(){return m.a.get(O).then((function(e){return e.data}))},create:function(e){return m.a.post(O,e).then((function(e){return e.data}))},remove:function(e){return m.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return m.a.put("".concat(O,"/").concat(e),t).then((function(e){return e.data}))}},f=function(e){var t=e.notification;return null===t.message&&null===t.errormessage?null:t.message?Object(u.jsx)("p",{className:"notification",children:t.message}):Object(u.jsx)("p",{className:"error",children:t.errormessage})},g=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),l=Object(s.a)(r,2),d=l[0],m=l[1],O=Object(c.useState)(""),g=Object(s.a)(O,2),p=g[0],v=g[1],x=Object(c.useState)(""),C=Object(s.a)(x,2),N=C[0],w=C[1],k=Object(c.useState)({message:null,errormessage:null}),R=Object(s.a)(k,2),S=R[0],T=R[1],y=n.filter((function(e){return e.name.toUpperCase().includes(N.toUpperCase())}));Object(c.useEffect)((function(){h.getAll().then((function(e){return a(e)}))}),[]);return Object(u.jsxs)("div",{className:"main-container",children:[Object(u.jsx)("h1",{children:"Phonebook"}),(S.message||S.errormessage)&&Object(u.jsx)(f,{notification:S}),Object(u.jsx)(i,{value:N,handleFiltered:function(e){return w(e.target.value)}}),Object(u.jsx)(j,{addPerson:function(e){if(e.preventDefault(),d&&p){var t=n.find((function(e){return e.name.toLowerCase()===d.trim().toLowerCase()}));if(t){alert("".concat(d," is already added to phonebook,Replace old number with new"));var c=Object(o.a)(Object(o.a)({},t),{},{number:p});h.update(t.id,c).then((function(e){a(n.map((function(n){return t.id!==n.id?n:e}))),m(""),v(""),T(Object(o.a)(Object(o.a)({},S),{},{message:"changed number from ".concat(t.number," to ").concat(e.number)})),setTimeout((function(){T(Object(o.a)(Object(o.a)({},S),{},{message:null}))}),5e3)})).catch((function(e){T(Object(o.a)(Object(o.a)({},S),{},{errormessage:e.response.data.error})),setTimeout((function(){T(Object(o.a)(Object(o.a)({},S),{},{errormessage:null}))}),5e3)}))}else{var r={name:d,number:p};h.create(r).then((function(e){a(n.concat(e)),T(Object(o.a)(Object(o.a)({},S),{},{message:"".concat(e.name," added.")})),m(""),v(""),setTimeout((function(){T(Object(o.a)(Object(o.a)({},S),{},{message:null}))}),5e3)})).catch((function(e){T(Object(o.a)(Object(o.a)({},S),{},{errormessage:e.response.data.error})),setTimeout((function(){T(Object(o.a)(Object(o.a)({},S),{},{errormessage:null}))}),5e3)}))}}else T(Object(o.a)(Object(o.a)({},S),{},{errormessage:"name or number is missing"})),setTimeout((function(){T(Object(o.a)(Object(o.a)({},S),{},{errormessage:null}))}),5e3)},valuename:d,valuenumber:p,handleNameChange:function(e){return m(e.target.value)},handleNumberChange:function(e){return v(e.target.value)}}),y.length>0?Object(u.jsx)(b,{filteredContact:y,handleRemove:function(e,t){window.confirm("Delete ".concat(t," ?")),h.remove(e),T(Object(o.a)(Object(o.a)({},S),{},{message:"Removed ".concat(t)})),setTimeout((function(){T(Object(o.a)(Object(o.a)({},S),{},{message:null}))}),3e3),a(n.filter((function(t){return e!==t.id})))}}):Object(u.jsx)("p",{className:"no_contact",children:"No contacts found."})]})};n(41);r.a.render(Object(u.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.576304a7.chunk.js.map